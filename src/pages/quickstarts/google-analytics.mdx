# Quickstart with Google Analytics

Since MV3 doesn't support remote code execution, Plasmo supports remote code bundling in build time. The framework will fetch a remote resource and bundle it locally on build time.

We'll be using this feature since Google Analytics isn't in any Javascript registry.

## Env Variable Setup

We'll need to tell Plasmo what our GTAG ID is, so we'll use an environment variable for that

`.env.local`

```
PLASMO_PUBLIC_GTAG_ID=<fill this in>
```

To get autocomplete,

`index.d.ts`

```ts
declare namespace NodeJS {
  interface ProcessEnv {
    PLASMO_PUBLIC_GTAG_ID?: string
  }
}

interface Window {
  dataLayer: Array
  gtag: (a: string, b: any, c?: any) => void
}
```

## Using Google Analytics in a React component

```tsx
import "https://www.googletagmanager.com/gtag/js?id=$PLASMO_PUBLIC_GTAG_ID"
import { useEffect, useState } from "react"

function IndexPopup() {
  const [data, setData] = useState("")

  useEffect(() => {
    window.dataLayer = window.dataLayer || []
    window.gtag = function gtag() {
      window.dataLayer.push(arguments) // eslint-disable-line
    }
    window.gtag("js", new Date())
    window.gtag("config", process.env.PLASMO_PUBLIC_GTAG_ID, {
      page_path: "/popup",
      debug_mode: true
    })

    window.gtag("event", "login", {
      method: "TEST"
    })
  }, [])

  return (
    <div
      style={{
        display: "flex",
        flexDirection: "column",
        padding: 16
      }}>
      <h1>
        Welcome to your <a href="https://www.plasmo.com">Plasmo</a> Extension!
      </h1>
      <input onChange={(e) => setData(e.target.value)} value={data} />
    </div>
  )
}

export default IndexPopup
```

## Full Example

To see a complete example, check out [with-google-analytics](https://github.com/PlasmoHQ/examples/tree/main/with-google-analytics) in our examples repo.
